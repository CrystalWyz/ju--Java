{
  "author" : "zhouzhitong",
  "version" : "1.2.8",
  "userSecure" : "",
  "currTypeMapperGroupName" : "Default",
  "currTemplateGroupName" : "自定义-mybatis-plus-脚本",
  "currColumnConfigGroupName" : "Default",
  "currGlobalConfigGroupName" : "Default",
  "typeMapper" : { },
  "template" : {
    "自定义-mybatis-plus-脚本" : {
      "name" : "自定义-mybatis-plus-脚本",
      "elementList" : [ {
        "name" : "entity.java.vm",
        "code" : "##导入宏定义\n$!{define.vm}\n\n##保存文件（宏定义）\n#save(\"/bean\", \".java\")\n\n##包路径（宏定义）\n#setPackageSuffix(\"bean\")\n\n#set($isLocale = false)\n\n#foreach($column in $tableInfo.fullColumn)\n    #if(${column.name} == \"locale\")\n        #set($isLocale = true)\n    #end\n#end\n\n##自动导入包（全局变量）\n$!{autoImport.vm}\n#if (${isLocale})\nimport com.zhouzhitong.lib.mapper.entity.BaseLocaleEntity;\n#else\nimport org.athena.framework.mybatis.entity.BaseEntity;\n#end\n\nimport java.io.Serializable;\n\nimport lombok.Setter;\nimport lombok.Getter;\nimport lombok.ToString;\nimport com.baomidou.mybatisplus.annotation.TableName;\n\n##表注释（宏定义）\n#tableComment(\"表实体类\")\n@Setter\n@Getter\n@ToString(callSuper = true)\n@TableName(value = \"$!{tableInfo.obj.name}\",resultMap = \"$!{tableInfo.savePackageName}.mapper.$!{tableInfo.name}Mapper.$!{tableInfo.name}Map\")\npublic class $!{tableInfo.name} extends #if (${isLocale}) BaseLocaleEntity #else BaseEntity #end{\n\n\n#foreach($column in $tableInfo.fullColumn)\n    #if(${column.name} == \"id\"\n    ||$!{column.name} == \"createTime\"\n    ||${column.name} == \"updateTime\"\n    ||${column.name} == \"createdBy\"\n    ||${column.name} == \"locale\"\n    ||${column.name} == \"lastModifiedBy\"\n    ||${column.name} == \"version\"\n    ||${column.name} == \"deleted\")\n    #else\n        #if(!(${column.name} == \"no\" && ${isLocale}))\n            #if(${column.comment})\n            /**\n             * ${column.comment}\n             */\n            #end\n        private $!{tool.getClsNameByFullName($column.type)} $!{column.name};\n        #end\n\n    #end\n#end\n}"
      }, {
        "name" : "entityDTO.java.vm",
        "code" : "##导入宏定义\n$!{define.vm}\n\n##保存文件（宏定义）\n#save(\"/dto\", \"DTO.java\")\n\n##包路径（宏定义）\n#setPackageSuffix(\"dto\")\n#set($isLocale = false)\n\n#foreach($column in $tableInfo.fullColumn)\n    #if(${column.name} == \"locale\")\n        #set($isLocale = true)\n    #end\n#end\n\n##自动导入包（全局变量）\n$!{autoImport.vm}\n\n#if (${isLocale})\nimport com.zhouzhitong.lib.common.dto.BaseLocaleDTO;\n#else\nimport org.athena.framework.mybatis.dto.BaseDTO;\n#end\nimport java.io.Serializable;\n\nimport lombok.Setter;\nimport lombok.Getter;\nimport lombok.ToString;\n\n##表注释（宏定义）\n#tableComment(\"DTO\")\n@Setter\n@Getter\n@ToString(callSuper = true)\npublic class $!{tableInfo.name}DTO extends #if (${isLocale}) BaseLocaleDTO #else BaseDTO #end{\n\n    #foreach($column in $tableInfo.fullColumn)\n        #if(${column.name} == \"id\"\n        ||$!{column.name} == \"createTime\"\n        ||${column.name} == \"updateTime\"\n        ||${column.name} == \"createdBy\"\n        ||${column.name} == \"lastModifiedBy\"\n        ||${column.name} == \"version\"\n        ||${column.name} == \"locale\"\n        ||${column.name} == \"deleted\")\n        #else\n            #if(!(${column.name} == \"no\" && ${isLocale}))\n                #if(${column.comment})\n                    /**\n                     * ${column.comment}\n                     */\n                #end\n                private $!{tool.getClsNameByFullName($column.type)} $!{column.name};\n            #end\n        #end\n    #end\n}"
      }, {
        "name" : "entityQuery.java.vm",
        "code" : "##导入宏定义\n$!{define.vm}\n\n##保存文件（宏定义）\n#save(\"/query\", \"Query.java\")\n\n##包路径（宏定义）\n#setPackageSuffix(\"query\")\n\n##自动导入包（全局变量）\n$!{autoImport.vm}\n\nimport org.athena.framework.mybatis.base.BaseRequest;\nimport lombok.Setter;\nimport lombok.Getter;\nimport lombok.ToString;\n\n##表注释（宏定义）\n#tableComment(\" 请求参数\")\n@Setter\n@Getter\n@ToString(callSuper = true)\npublic class $!{tableInfo.name}Query extends BaseRequest {\n\n    #foreach($column in $tableInfo.fullColumn)\n        #if(${column.name} == \"id\"\n        ||$!{column.name} == \"createTime\"\n        ||$!{column.name} == \"updateTime\"\n        ||$!{column.name} == \"createdBy\"\n        ||$!{column.name} == \"lastModifiedBy\"\n        ||$!{column.name} == \"version\"\n        ||$!{column.name} == \"deleted\")\n        #else\n            #if(${column.comment})\n                /**\n                 * ${column.comment}\n                 */\n            #end\n            private $!{tool.getClsNameByFullName($column.type)} $!{column.name};\n        #end\n    #end\n}"
      }, {
        "name" : "mapper.java.vm",
        "code" : "##导入宏定义\n$!{define.vm}\n\n##设置表后缀（宏定义）\n#setTableSuffix(\"Mapper\")\n\n##保存文件（宏定义）\n#save(\"/mapper\", \"Mapper.java\")\n\n##包路径（宏定义）\n#setPackageSuffix(\"mapper\")\n\nimport org.athena.framework.mybatis.mapper.CrudMapper;\nimport $!{tableInfo.savePackageName}.bean.$!tableInfo.name;\n\n##表注释（宏定义）\n#tableComment(\"表数据库访问层\")\npublic interface $!{tableName} extends CrudMapper<$!tableInfo.name> {\n\n        }\n"
      }, {
        "name" : "mapper.xml.vm",
        "code" : "##引入mybatis支持\n$!{mybatisSupport.vm}\n\n##设置保存名称与保存位置\n$!callback.setFileName($tool.append($!{tableInfo.name}, \"Mapper.xml\"))\n$!callback.setSavePath($tool.append($modulePath, \"/src/main/resources/mapper\"))\n\n##拿到主键\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#set($size = $tableInfo.fullColumn.size())\n#set($i = 1)\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n    <mapper namespace=\"$!{tableInfo.savePackageName}.mapper.$!{tableInfo.name}Mapper\">\n\n        <resultMap type=\"$!{tableInfo.savePackageName}.bean.$!{tableInfo.name}\" id=\"$!{tableInfo.name}Map\">\n            #foreach($column in $tableInfo.fullColumn)\n                <result property=\"$!{column.name}\" column=\"$!column.obj.name\" jdbcType=\"$!{column.ext.jdbcType}\"#if($!{column.ext.sqlType}=='json') typeHandler=\"org.athena.framework.mybatis.handler.DefaultJsonHandler\" #end/>\n            #end\n        </resultMap>\n\n        <sql id=\"column\">\n                #foreach($column in ${tableInfo.fullColumn}) #set($i = ${i}+1)\n                    #if($!i <= $!size) `$!{column.obj.name}`,\n    #else `$!{column.obj.name}`\n    #end#end\n        </sql>\n\n        <sql id=\"where\">\n            <where>\n                #foreach($column in ${tableInfo.fullColumn})\n                    <if test=\"$!{column.name} != null\">\n                        and `$!{column.obj.name}` = #{$!{column.name}}\n                    </if>\n                #end\n                <if test=\"sorts != null and sorts.size > 0)\">\n                    order by\n                    <foreach collection=\"sorts\" item=\"sort\" separator=\", \">\n                        `#{sort.column}` #{sort.sort}\n                    </foreach>\n                </if>\n\n                <if test=\"size != null and current != null\">\n                    limit #{current},#{size}\n                </if>\n            </where>\n        </sql>\n\n        <!-- 软删除 -->\n        <delete id=\"remove\" >\n            update $!{tableInfo.obj.parent.name}.$!{tableInfo.obj.name}\n            set `deleted` = 1\n            <include refid=\"where\"/>\n        </delete>\n\n        <!-- 分页查询 -->\n        <select id=\"pageQuery\" resultMap=\"$!{tableInfo.name}Map\">\n            select <include refid=\"column\"/> from $!{tableInfo.obj.name}\n            <include refid=\"where\"/>\n        </select>\n\n    </mapper>\n"
      }, {
        "name" : "service.java.vm",
        "code" : "##导入宏定义\n$!{define.vm}\n\n##设置表后缀（宏定义）\n#setTableSuffix(\"Service\")\n\n##保存文件（宏定义）\n#save(\"/service\", \"Service.java\")\n\n##包路径（宏定义）\n#setPackageSuffix(\"service\")\n\nimport org.athena.framework.mybatis.service.MapperService;\nimport $!{tableInfo.savePackageName}.bean.$!tableInfo.name;\nimport $!{tableInfo.savePackageName}.dto.$!{tableInfo.name}DTO;\n\n##表注释（宏定义）\n#tableComment(\"表服务接口\")\npublic interface $!{tableName}\nextends MapperService<$!tableInfo.name, $!{tableInfo.name}DTO> {\n\n@Override\ndefault $!{tableInfo.name}DTO newDTO() {\n        return new $!{tableInfo.name}DTO();\n        }\n\n@Override\ndefault $!{tableInfo.name} newEntity() {\n        return new $!{tableInfo.name}();\n        }\n\n        }\n"
      }, {
        "name" : "serivceImpl.java.vm",
        "code" : "##导入宏定义\n$!{define.vm}\n\n##设置表后缀（宏定义）\n#setTableSuffix(\"ServiceImpl\")\n\n##保存文件（宏定义）\n#save(\"/service/impl\", \"ServiceImpl.java\")\n\n##包路径（宏定义）\n#setPackageSuffix(\"service.impl\")\nimport org.athena.framework.mybatis.service.impl.MapperServiceImpl;\nimport $!{tableInfo.savePackageName}.mapper.$!{tableInfo.name}Mapper;\nimport $!{tableInfo.savePackageName}.bean.$!{tableInfo.name};\nimport $!{tableInfo.savePackageName}.dto.$!{tableInfo.name}DTO;\nimport $!{tableInfo.savePackageName}.service.$!{tableInfo.name}Service;\nimport org.springframework.stereotype.Service;\n\n##表注释（宏定义）\n#tableComment(\"表服务实现类\")\n@Service(\"$!tool.firstLowerCase($tableInfo.name)Service\")\npublic class $!{tableName}\nextends MapperServiceImpl<$!{tableInfo.name}Mapper, $!{tableInfo.name},$!{tableInfo.name}DTO>\n    implements $!{tableInfo.name}Service {\n\n\n        }\n"
      }, {
        "name" : "controller.java.vm",
        "code" : "##导入宏定义\n$!{define.vm}\n\n##设置表后缀（宏定义）\n#setTableSuffix(\"Controller\")\n\n##保存文件（宏定义）\n#save(\"/controller\", \"Controller.java\")\n\n##包路径（宏定义）\n#setPackageSuffix(\"controller\")\n\n##定义服务名\n#set($serviceName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), \"Service\"))\n\n##定义实体对象名\n#set($entityName = $!tool.firstLowerCase($!tableInfo.name))\n\n### 这个暂时没确定好位置\nimport com.zhouzhitong.test.mybatis.controller.base.BaseController;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport $!{tableInfo.savePackageName}.service.$!{tableInfo.name}Service;\nimport $!{tableInfo.savePackageName}.bean.$!tableInfo.name;\nimport $!{tableInfo.savePackageName}.query.$!{tableInfo.name}Query;\nimport $!{tableInfo.savePackageName}.dto.$!{tableInfo.name}DTO;\n\n\n\n##表注释（宏定义）\n#tableComment(\"表控制层\")\n@RestController\n@RequestMapping(\"/api/v1/$!tool.firstLowerCase($!tableInfo.name)\")\npublic class $!{tableName}\n    extends BaseController<$!tableInfo.name, $!{tableInfo.name}DTO , $!{tableInfo.name}Query, $!{tableInfo.name}Service>{\n\n\n}"
      }, {
        "name" : "entityHttp.http.vm",
        "code" : "##引入mybatis支持\n$!{mybatisSupport.vm}\n\n##设置保存名称与保存位置\n$!callback.setFileName($tool.append($!{tableInfo.name}, \"Controller.http\"))\n$!callback.setSavePath($tool.append($modulePath, \"/src/main/resources/http\"))\n\n#set($comment = $tool.append(\"#\", \"#\", \"#\")) \n\n$!{comment} 1. 新增 $!{tableInfo.name} 实体\nPOST {{host}}$!{tableInfo.name}s\nContent-Type: application/json;charset=UTF-8\n\n{\n#foreach($column in $tableInfo.fullColumn)\n    #if(${column.name} == \"id\"\n    ||$!{column.name} == \"createTime\"\n    ||${column.name} == \"updateTime\"\n    ||${column.name} == \"createdBy\"\n    ||${column.name} == \"locale\"\n    ||${column.name} == \"lastModifiedBy\"\n    ||${column.name} == \"version\"\n    ||${column.name} == \"deleted\")\n    #else\n        #if(!(${column.name} == \"no\" && ${isLocale}))\n        \"$!{column.name}\": $!{tool.getClsNameByFullName($column.type)},\n        #end\n    #end\n#end\n\n}\n\n$!{comment} 2. 修改 $!{tableInfo.name} 实体\nPUT {{host}}permissions/1\nContent-Type: application/json;charset=UTF-8\n\n{\n  \"name\": \"test-1\",\n  \"description\": \"权限描述\",\n  \"type\": 1,\n  \"url\": \"权限url-adasd\",\n  \"sequence\": 100,\n  \"display\": \"1\",\n  \"version\": 2,\n  \"authorities\": [\n    {\n      \"method\": \"GET\",\n      \"url\": \"/api/v1/permissions/{id}\"\n    }\n  ]\n}\n\n$!{comment} 3. 删除 $!{tableInfo.name} 实体\nDELETE {{host}}permissions/1\n\n$!{comment}4. 查询 $!{tableInfo.name} 实体\nGET {{host}}permissions/1\n\n$!{comment} 5. 查询 $!{tableInfo.name} 实体列表\nGET {{host}}permissions?page=2&size=1&sorts=id desc\nContent-Type: text/plain\n"
      } ]
    }
  },
  "columnConfig" : { },
  "globalConfig" : { }
}